<!DOCTYPE HTML>

<html lang="fa">

<head>
    <!--<script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async=""></script>-->
    <!--<script>-->
    <!--var OneSignal = window.OneSignal || [];-->
    <!--OneSignal.push(function () {-->
    <!--OneSignal.init({-->
    <!--appId: "6f586003-93c7-4535-b12c-8ff55e4c6368",-->
    <!--});-->
    <!--});-->
    <!--</script>-->
    <link rel="manifest" href="/manifest.json">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="stylesheet" href="bower_components/bootswatch-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="bower_components/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/index.css">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>Designy</title>
</head>

<body>

<header>
    <nav>
        <ul>
        </ul>
    </nav>
</header>
<div class="container-fluid">
    <div class='onesignal-customlink-container'></div>
    <div class="row">
        <section class="col-md-8">
            <div id="content"></div>
        </section>

        <aside class="col-md-4">
            <h2>About section</h2>
            <p></p>
        </aside>
    </div>
    <div class="row">
        <footer class="col-md-12 text-center">
            <p>Copyright 2016 Designy</p>
        </footer>
    </div>
</div>
<script src="bower_components/jquery/dist/jquery.min.js"></script>
<!--<script src="bower_components/bootswatch-dist/js/bootstrap.min.js"></script>-->
<!--<script src="bower_components/nunjucks/browser/nunjucks.min.js"></script>-->
<!--<script src="assets/js/index.js"></script>-->



<script type="text/javascript">
        var now = new Date();
        var version = now.getFullYear().toString() + "0" + now.getMonth() + "0" + now.getDate() +
            "0" + now.getHours();

        var head = document.getElementsByTagName("head")[0];

        var link = document.createElement("link");
        link.rel = "stylesheet";
        link.href = "https://app.najva.com/static/css/local-messaging.css" + "?v=" + version;
        head.appendChild(link);

/*
        var script = document.createElement("script");
        script.type = "text/javascript";
        script.async = true;
        script.src = "https://app.najva.com/static/js/scripts/aliii153-673-33b20583-7e29-4262-bb3a-3955a9b0f906.js" + "?v=" + version;
        head.appendChild(script);
*/



console.log("hi26")
            window.najvaSettings = {
            api_key: "33b205837e294262bb3a3955a9b0f906",
            location_permission: false,
            web_push_host_url: "https://aliii.ir/",
            dismiss_cookie_days: 3,
            request_permission: {
                delay: {
                    enable: 1,
                    value: 1,
                },
                scroll: {
                    enable: 0,
                    value: 50,
                },
                visit: {
                    minimum: {
                        enable: 1,
                        value: 2,
                    },
                    maximum: {
                        enable: 0,
                        value: 24,
                    },
                    interval: {
                        enable: 0,
                        value: 3,
                    },
                },
            },
            campaign_id: 673,
            website_id: 167,
            show_bell: 1,
            show_bell_in_mobile: 0,
            bell_direction: "right",
            bell_color_hover: "7A7A7A",
            bell_color: "444444",
            bell_tooltip: "مشترک شوید",
            };


var hasSubscribed = false;

function get_domain_for_cookie(host) {
    var host_split = host.split(".");
    var top_domain = host_split[host_split.length - 1];
    var domain_name = host_split[host_split.length - 2];
    if (domain_name.length > 2) {
        return "." + domain_name + "." + top_domain
    }
    else if (host_split.length > 2) {
        var subdomain = host_split[host_split.length - 3];
        return "." + subdomain + "." + domain_name + "." + top_domain
    }
}

var domain_for_cookie = get_domain_for_cookie(window.location.hostname);
// cookie handling funcions
window["najvaSetCookie"] = function (cname, cvalue, exdays) {
    var d = new Date();
    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
    var expires = "expires=" + d.toUTCString();
    document.cookie = cname + "=" + cvalue + ";" + expires + ";domain=" + domain_for_cookie + ";path=/";
}
window["najvaGetCookie"] = function (name) {
    var cookieValue = null;
    if (document.cookie && document.cookie !== '') {
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookie = cookies[i].trim();
            // Does this cookie string begin with the name we want?
            if (cookie.substring(0, name.length + 1) === (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}

window["NajvaLoadScript"] = function (u, c) {
    var url_parts = u.split("/");
    var name = url_parts[url_parts.length - 1].split(".")[0];
    if (!document.querySelector("#" + name)) {
        var d = document, t = 'script',
            o = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        o.src = u;
        o.id = name;
        if (c) {
            o.addEventListener('load', function (e) {
                c(null, e);
            }, false);
        }
        s.parentNode.insertBefore(o, s);
    }
};

function get_najva_messaging() {
    NajvaLoadScript("https://app.najva.com/static/cdn/najva-app/najva-messaging.js")
}

NajvaLoadScript("https://app.najva.com/static/cdn/najva-app/najva-app.js", get_najva_messaging);

window["webPushInitialize"] = function (topic, website, showBell) {
    window.webPushTopic = topic;
    window.webPushWebsite = website;

    setUserAgentParameters();
    //todo: browser support
    if (!((browserName === "Chrome" && majorVersion >= 50) || (browserName === "Firefox" && majorVersion >= 44) || (browserName === "Opera"))) {
        return;
    }
    if (window.document.location.protocol === "http:") {
        return;
    }

    var isLastActiveTimeUpToDate = true;

    var hasShownPopUp = najvaGetCookie('pushNotification:hasShownPopUp:' + topic);

    var lastActiveTimeString = najvaGetCookie('najva_last_active_time:' + topic);
    var today = new Date();
    window.todayString = today.getFullYear() + ("0" + today.getMonth()).slice(-2) + ("0" + today.getUTCDate()).slice(-2);

    if (lastActiveTimeString) {
        if (todayString !== lastActiveTimeString) {
            isLastActiveTimeUpToDate = false;
        }
    } else {
        isLastActiveTimeUpToDate = false;
    }
    //
    // if (!isLastActiveTimeUpToDate) {
    //     najvaSetCookie('najva_last_active_time:' + topic, todayString, 3650);
    // }

    var cookie_token = najvaGetCookie('cookie_token:' + topic);
    if (cookie_token !== null) {
        hasSubscribed = true;
    } else {
        isLastActiveTimeUpToDate = true;
    }

    if (!hasSubscribed || !isLastActiveTimeUpToDate) {
        var xhr = new XMLHttpRequest();
        window.current_user_api_url = 'https://app.najva.com/api/v1/current/user/?topic=' + topic + '&website=' + website + "&api_key=" + webPushApiKey;

        if (!isLastActiveTimeUpToDate) {
            current_user_api_url += "&update_time=1";
        } else {
            current_user_api_url += "&update_time=0"
        }

        if (!hasSubscribed) {
            current_user_api_url += "&get_token=1";
        } else {
            current_user_api_url += "&get_token=0"
        }
        xhr.open('GET', current_user_api_url, true);
        xhr.withCredentials = true;
        xhr.onload = function () {
            if (xhr.status === 200) {
                var response = JSON.parse(xhr.responseText);
                if (response.status === "found") {
                    najvaSetCookie('cookie_token:' + topic, response.cookie_token, 3650);
                    hasSubscribed = true;
                    // hideSubscribeBell();
                }
            }
        };
        if (window.Notification && Notification.permission !== "granted") {
            return;
        }
        if (lastActiveTimeString) {
            if (todayString === lastActiveTimeString) {
                return
            }
        } else {
            najvaSetCookie('najva_last_active_time:' + topic, todayString, 3650);
        }
        xhr.send();
    }


};


window["webPushYesButtonPressed"] = function () {
    showPopUp();
};
window["webPushNoButtonPressed"] = function () {
    setNotWantPopUpCookie();
};
window["najvaSendRequest"] = function (url, success, reject, method, data, headers) {
    var httpRequest = "undefined" != typeof XMLHttpRequest ? new XMLHttpRequest : new ActiveXObject("Microsoft.XMLHTTP");
    httpRequest.open(method, url, !0),
        httpRequest.withCredentials = !0,
        httpRequest.onreadystatechange = function () {
            var a;
            4 == httpRequest.readyState && (a = httpRequest.status, 200 == a ? success && success(httpRequest.response) : reject && reject(a))
        };
    if (headers) {
        var header_keys = Object.keys(headers);
        for (var i = 0; i < header_keys.length; i++) {
            httpRequest.setRequestHeader(header_keys[i], headers[header_keys[i]])
        }
    }
    if (data) {
        httpRequest.send(data)
    }
    else {
        httpRequest.send()
    }
}
// window["setHasShownCookie"] = function () {
//     najvaSetCookie(window.shown_pop_up_window_cookie_key, true, 3650);
// };

showPopUp.hasAlreadyShown = false;

function get_messaging_fn(call) {
    var config = {
        messagingSenderId: "334645784830"
    };

    function get_messaging() {
        firebase.initializeApp(config);
        messaging = firebase.messaging();
        call()
    }

    function load_messaging() {
        NajvaLoadScript("https://www.gstatic.com/firebasejs/3.9.0/firebase-messaging.js", get_messaging)
    }

    try {
        firebase.initializeApp(config);
        messaging = firebase.messaging();
        call();
    }
    catch (e) {
        NajvaLoadScript("https://www.gstatic.com/firebasejs/3.9.0/firebase-app.js", load_messaging);
    }

}

function show_message_when_user_is_in_site() {
    messaging.onMessage(function (payload) {
        console.log("in foreground payload!!");
        if (!document.hidden) {
            var expireTime = parseInt(payload.data.expireTime);
            var notification = new Notification(
                payload.data.title,
                {
                    body: payload.data.body,
                    icon: payload.data.icon,
                    requireInteraction: true,
                    image: payload.data.image
                }
            );

            notification.id = payload.data.notification_id;

            notification.isClosedByScript = false;

            notification.onclick = function () {
                var url = "https://click.najva.com/redirect/?notification_id=" + payload.data.notification_id;
                url += '&website_id=' + payload.data.website_id;
                url += '&api_key=' + payload.data.api_key;
                url += "&next=" + payload.data.url;

                window.open(url, '_bl');
                notification.isClosedByScript = true;
                notification.close();
            };

            notification.onclose = function () {
                if (!notification.isClosedByScript) {
                    var xhr = new XMLHttpRequest();
                    var url = 'https://app.najva.com/api/v1/notification/closed/?notification_id=' + payload.data.notification_id;
                    url += '&website_id=' + payload.data.website_id;
                    url += '&api_key=' + payload.data.api_key;
                    xhr.open('GET', url, true);
                    xhr.withCredentials = true;
                    xhr.send();
                }
            };

            if (expireTime > 0) {
                setTimeout(function () {
                    notification.isClosedByScript = true;
                    notification.close();
                }, expireTime)
            }
        }
    });
}

function showPopUp() {
    if (showPopUp.hasAlreadyShown == true) {
        return;
    }
    showPopUp.hasAlreadyShown = true;

    // hideSubscribeBell();
    // setHasShownCookie();

    // var url = WEB_PUSH_HOST_URL + "request/permission/?topics=" + window.webPushTopic + "&website=" + window.webPushWebsite + "&api_key=" + webPushApiKey;

    // var new_window = window.open(url, 'popup', 'width=700,height=700,scrollbars=no,resizable=no,toolbar=no,menubar=no');
    // if (window.focus) {
    //     new_window.focus()
    // }
    get_messaging_fn(handle_permission);

    function handle_permission() {
        show_message_when_user_is_in_site();
        var topic = window.webPushTopic;
        var location_permission = window.location_permission;
        var website_id = window.webPushWebsite;
        var api_key = webPushApiKey;


        function checkPermissionRequest() {
            messaging.requestPermission().then(function () {
            }).catch(function () {
                console.log("couldn't get notification permission from user.");
            });
        }

        function sendTokenToServer(token) {
            var http = new XMLHttpRequest();
            var url = "https://app.najva.com/api/v1/add/";
            var params = "token_id=" + token + "&topic=" + topic + "&website_id=" + website_id + "&api_key=" + api_key;
            http.withCredentials = true;
            http.open("POST", url, true);
            http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

            http.onreadystatechange = function () {
                if (http.readyState == 4) {
                    if (http.status == 200) {


                        var xhr = new XMLHttpRequest();
                        xhr.open('GET', window.current_user_api_url, true);
                        xhr.withCredentials = true;
                        xhr.onload = function () {
                            if (xhr.status === 200) {
                                var response = JSON.parse(xhr.responseText);
                                if (response.status === "found") {
                                    najvaSetCookie('cookie_token:' + topic, response.cookie_token, 3650);
                                    hasSubscribed = true;
                                    // hideSubscribeBell();
                                }
                            }
                        };
                        if (window.Notification && Notification.permission !== "granted") {
                            return;
                        }
                        najvaSetCookie('najva_last_active_time:' + window.webPushTopic, todayString, 3650);
                        xhr.send();

                        cookie_token = JSON.parse(http.response).cookie_token;
                        najvaSetCookie("cookie_token:" + topic, cookie_token, 3650);
                        najvaSetCookie(window.token_id_cookie_key, token, 3650);
                        if (location_permission) {
                            // get location permission
                            navigator.permissions.query({ name: 'geolocation' }).then(function (permission) {
                                console.log("initial permission state : ", permission.state);
                                var options = {
                                    enableHighAccuracy: true,
                                    timeout: 60000,
                                    maximumAge: 0
                                };

                                function success(pos) {
                                    var crd = pos.coords;
                                    var data = {
                                        "accuracy": crd.accuracy,
                                        "altitude": crd.altitude,
                                        "latitude": crd.latitude,
                                        "longitude": crd.longitude
                                    };
                                    var url = "https://app.najva.com/api/v1/location/";
                                    najvaSendRequest(url, function success(response) {
                                        najvaSetCookie("tlc", true, 0.5);
                                    }, function error(response) {
                                    }, "POST", JSON.stringify(data), { "Content-Type": "application/json" });

                                }

                                function error(err) {
                                    console.warn(`ERROR(${err.code}): ${err.message}`);
                                }

                                navigator.geolocation.getCurrentPosition(success, error, options);

                                permission.onchange = function (event) {
                                    var state = event.currentTarget.state;
                                    console.log("permission status changed to : ", state);
                                    if (state == "granted") {
                                        console.log("user granted location access.")
                                    }
                                    else if (state == "denied") {
                                        console.log("user denied location access.")
                                    }
                                    else if (state == "prompt") {
                                        navigator.geolocation.getCurrentPosition(success, error, options);
                                    }
                                }

                            });
                        }
                    }
                }
            };

            http.send(params);
        }

        navigator.permissions.query({ name: 'notifications' }).then(function (permission) {
            console.log("initial permission state : ", permission.state);
            permission.onchange = function (event) {

                var state = event.currentTarget.state;
                console.log("permission status changed to : ", state);

                if (state == "granted") {
                    messaging.getToken()
                        .then(function (currentToken) {
                            console.log(currentToken + " is your token.");
                            sendTokenToServer(currentToken);

                        }).catch(function () {

                        console.log("unexpected error");
                    });
                }
                else if (state == "denied") {
                    webPushNoButtonPressed();
                }
                else if (state == "prompt") {
                    checkPermissionRequest();
                }
            };
        });
        messaging.getToken().then(function (currentToken) {
            if (!currentToken) {
                checkPermissionRequest()
            }
            else {
                var cookie_token = najvaGetCookie("cookie_token:" + topic);
                if (cookie_token === null) {
                    sendTokenToServer(currentToken);
                }
                else {
                    console.log("already have permission for this topic. closing...");
                }
            }
        }).catch(function (error) {
        });
    }

    return false;
}

showRequestPanel.hasAlreadyShown = false;

function showRequestPanel() {
    if (showRequestPanel.hasAlreadyShown) {
        return;
    }
    showRequestPanel.hasAlreadyShown = true;

    // var item = document.querySelector("#najva-subscriber-native-help");
    // item.classList.remove("deactive");
    webPushYesButtonPressed();
}

function getScrollPercent() {
    var h = document.documentElement,
        b = document.body,
        st = 'scrollTop',
        sh = 'scrollHeight';
    return (h[st] || b[st]) / ((h[sh] || b[sh]) - h.clientHeight) * 100;
}


window["webPushRequestPermission"] = function (options) {

    if (showPopUp.hasAlreadyShown)
        return;

    if (!((browserName === "Chrome" && majorVersion >= 50) || (browserName === "Firefox" && majorVersion >= 44) || (browserName === "Opera"))) {
        return;
    }
    if (window.document.location.protocol === "http:") {
        return;
    }
    // handling cookies.
    // the function wont do anything if the popUp has already been shown to the user in the past,
    // if the user has clicked on "No" button in the request panel.

    window.shown_pop_up_window_cookie_key = 'pushNotification:hasShownPopUp:' + window.webPushTopic;
    window.not_want_cookie_key = 'pushNotification:notWantPopUp:' + window.webPushTopic;
    window.token_id_cookie_key = 'token_id:' + window.webPushTopic;

    if (window.Notification && Notification.permission === "denied") {
        return;
    }

    // if (najvaGetCookie(window.token_id_cookie_key) !== null) {
    //     return;
    // }
    if (najvaGetCookie(window.shown_pop_up_window_cookie_key) !== null) {
        return;
    }
    if (najvaGetCookie(window.not_want_cookie_key) !== null) {
        return;
    }

    var shown_count_cookie_key = 'pushNotification:shownCount:' + window.webPushTopic;
    var current_count = 0;
    var cookie = najvaGetCookie(shown_count_cookie_key);
    if (cookie !== null) {
        current_count = parseInt(najvaGetCookie(shown_count_cookie_key));
    }
    current_count++;
    najvaSetCookie(shown_count_cookie_key, current_count, 3650);

    // handling visit times
    // if the owner has selected any of these three: enable_minimum, enable_maximum and enable_interval, it is
    // assumed that they want to show the request based on number of visits. If none has been selected, this factor
    // will be ignored.

    if (options.visit.maximum.enable || options.visit.minimum.enable || options.visit.interval.enable) {
        if (!options.visit.minimum.enable) {
            options.visit.minimum.value = 1;
        }
        if (!options.visit.maximum.enable) {
            options.visit.maximum.value = 100000;
        }
        if (!options.visit.interval.enable) {
            options.visit.interval.value = 1;
        }

        if (current_count >= options.visit.minimum.value) {
            if (current_count <= options.visit.maximum.value) {
                if (((current_count - options.visit.minimum.value) % options.visit.interval.value) === 0) {
                    if (!options.delay.enable && !options.scroll.enable) {
                        showRequestPanel();
                    }
                    else {
                        if (options.scroll.enable) {
                            window.addEventListener('scroll', function () {
                                if (getScrollPercent() > options.scroll.value) {
                                    showRequestPanel();
                                }
                            });
                        }
                        if (options.delay.enable) {
                            setTimeout(function () {
                                showRequestPanel();
                            }, options.delay.value * 1000);
                        }
                    }
                }
            }
        }
    }
    else {
        if (!options.delay.enable && !options.scroll.enable) {
            showRequestPanel();
        }
        else {
            if (options.scroll.enable) {
                window.addEventListener('scroll', function () {
                    if (getScrollPercent() > options.scroll.value) {
                        showRequestPanel();
                    }
                });
            }
            if (options.delay.enable) {
                setTimeout(function () {
                    showRequestPanel();
                }, options.delay.value * 1000);
            }
        }
    }
};


var nVer = navigator.appVersion;
var nAgt = navigator.userAgent;
var browserName = navigator.appName;
var fullVersion = '' + parseFloat(navigator.appVersion);
var majorVersion = parseInt(navigator.appVersion, 10);
var nameOffset, verOffset, ix;

function setUserAgentParameters() {
    // In Opera, the true version is after "Opera" or after "Version"
    if ((verOffset = nAgt.indexOf("OPR")) != -1) {
        browserName = "Opera";
        fullVersion = nAgt.substring(verOffset + 4);
    }
// In MSIE, the true version is after "MSIE" in userAgent
    else if ((verOffset = nAgt.indexOf("MSIE")) != -1) {
        browserName = "Microsoft Internet Explorer";
        fullVersion = nAgt.substring(verOffset + 5);
    }
// In Chrome, the true version is after "Chrome"
    else if ((verOffset = nAgt.indexOf("Chrome")) != -1) {
        browserName = "Chrome";
        fullVersion = nAgt.substring(verOffset + 7);
    }
// In Safari, the true version is after "Safari" or after "Version"
    else if ((verOffset = nAgt.indexOf("Safari")) != -1) {
        browserName = "Safari";
        fullVersion = nAgt.substring(verOffset + 7);
        if ((verOffset = nAgt.indexOf("Version")) != -1)
            fullVersion = nAgt.substring(verOffset + 8);
    }
// In Firefox, the true version is after "Firefox"
    else if ((verOffset = nAgt.indexOf("Firefox")) != -1) {
        browserName = "Firefox";
        fullVersion = nAgt.substring(verOffset + 8);
    }
// In most other browsers, "name/version" is at the end of userAgent
    else if ((nameOffset = nAgt.lastIndexOf(' ') + 1) <
        (verOffset = nAgt.lastIndexOf('/'))) {
        browserName = nAgt.substring(nameOffset, verOffset);
        fullVersion = nAgt.substring(verOffset + 1);
        if (browserName.toLowerCase() == browserName.toUpperCase()) {
            browserName = navigator.appName;
        }
    }
    // trim the fullVersion string at semicolon/space if present
    if ((ix = fullVersion.indexOf(";")) != -1)
        fullVersion = fullVersion.substring(0, ix);
    if ((ix = fullVersion.indexOf(" ")) != -1)
        fullVersion = fullVersion.substring(0, ix);

    majorVersion = parseInt('' + fullVersion, 10);
    if (isNaN(majorVersion)) {
        fullVersion = '' + parseFloat(navigator.appVersion);
        majorVersion = parseInt(navigator.appVersion, 10);
    }
}

window["najvaSetLocation"] = function () {
    navigator.permissions.query({ name: 'geolocation' }).then(function (permission) {
        console.log("initial permission state : ", permission.state);
        var options = {
            enableHighAccuracy: true,
            timeout: 5000,
            maximumAge: 0
        };

        function success(pos) {
            najvaSetCookie("tlc", true, 0.5);
            var crd = pos.coords;
            var data = {
                "accuracy": crd.accuracy,
                "altitude": crd.altitude,
                "latitude": crd.latitude,
                "longitude": crd.longitude
            };
            var url = "https://app.najva.com/api/v1/location/";
            najvaSendRequest(url, function success(response) {
            }, function error(response) {
            }, "POST", JSON.stringify(data), { "Content-Type": "application/json" });


        }

        function error(err) {
            console.warn(`ERROR(${err.code}): ${err.message}`);
        }

        if (permission.state === "granted") {
            var tlc = najvaGetCookie("tlc");
            if (!tlc) {
                navigator.geolocation.getCurrentPosition(success, error, options);
            }
        }
    });
};

        function najvaRetry(isDone, next) {
            var current_trial = 0,max_retry = 50,interval = 10,is_timeout = false;
            var id = window.setInterval(function() {
                    if (isDone()) {
                        window.clearInterval(id);
                        next(is_timeout);
                    }
                    if (current_trial++ > max_retry) {
                        window.clearInterval(id);
                        is_timeout = true;
                        next(is_timeout);
                    }
                },10);
        }
        function isIE10OrLater(user_agent) {
            var ua = user_agent.toLowerCase();
            if (ua.indexOf("msie") === 0 && ua.indexOf("trident") === 0) {
                return false;
            }
            var match = /(?:msie|rv:)\s?([\d\.]+)/.exec(ua);
            if (match && parseInt(match[1], 10) >= 10) {
                return true;
            }
            return false;
        }
        function detectPrivateMode(callback) {
            var is_private;
            if (window.webkitRequestFileSystem) {
                window.webkitRequestFileSystem(window.TEMPORARY, 1,function() {
                is_private = false;
                },function(e) {
                    console.log(e);
                    is_private = true;
                });
            } else if (window.indexedDB && /Firefox/.test(window.navigator.userAgent)) {
            var db;
            try {
                db = window.indexedDB.open("test");
            }
            catch (e) {
                is_private = true;
            }
            if (typeof is_private === "undefined") {
                najvaRetry(function isDone() {
                return db.readyState === "done" ? true : false;
                },
                function next(is_timeout) {
                    if (!is_timeout) {
                        is_private = db.result ? false : true;
                    }
                });
                }
            }
            else if (isIE10OrLater(window.navigator.userAgent)) {
                is_private = false;
                try {
                    if (!window.indexedDB) {
                        is_private = true;
                    }
                }
                catch (e) {
                    is_private = true;
                }
            }
            else if (window.localStorage && /Safari/.test(window.navigator.userAgent)) {
                try {
                    window.localStorage.setItem("test", 1);
                }
                catch (e) {
                    is_private = true;
                }
                if (typeof is_private === "undefined") {
                    is_private = false;window.localStorage.removeItem("test");
                }
            }
            najvaRetry(function isDone() {
                return typeof is_private !== "undefined" ? true : false;
                },function next(is_timeout) {
                    callback(is_private);
                });
            }
            function setNotWantPopUpCookie() {
                najvaSetCookie(window.not_want_cookie_key, true, 3);
            }
            function htmlToElement(html) {
                var template = document.createElement("div"); template.innerHTML = html; return template.firstChild;
            }
            window['webPushApiKey'] = "33b205837e294262bb3a3955a9b0f906";
            window['location_permission'] = true;
            window['WEB_PUSH_HOST_URL'] = "https://aliii.ir/";
            detectPrivateMode(function (is_private) {
                if (!is_private) {
            var webPushInterval = setInterval(function(){
                if(document.body){
                clearInterval(webPushInterval);
         najvaSetLocation();
         webPushInitialize(673,167,1);
         webPushRequestPermission({delay : { enable: 1, value: 1 }, scroll: { enable: 0, value: 50 }, visit : { minimum : { enable: 1, value: 2 }, maximum : { enable: 0, value: 24 }, interval: { enable: 0, value: 3 } } });
         var css = "#najva-subscriber-bell{ right: 30px;} #najva-subscriber-bell:hover {background-color: #7A7A7A;} #najva-subscriber-bell .circle {background-color: #444444;}";
         var style = document.createElement("style");
         if (style.styleSheet) {
            style.styleSheet.cssText = css;
         }
         else {
            style.appendChild(document.createTextNode(css));
         }
         document.getElementsByTagName("head")[0].appendChild(style);
         }
         }, 100);
                              }
            });


</script>
<!--<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>-->
<!--<script>-->
  <!--(adsbygoogle = window.adsbygoogle || []).push({-->
    <!--google_ad_client: "ca-pub-2273900425299955",-->
    <!--enable_page_level_ads: true-->
  <!--});-->
<!--</script>-->
<!--<script type="text/javascript" data-cfasync="false">-->
 <!--var _foxpush = _foxpush || [];-->
 <!--_foxpush.push(['_setDomain', 'aliiiir']);-->
 <!--(function(){-->
     <!--var foxscript = document.createElement('script');-->
     <!--foxscript.src = '//cdn.foxpush.net/sdk/foxpush_SDK_min.js';-->
     <!--foxscript.type = 'text/javascript';-->
     <!--foxscript.async = 'true';-->
     <!--var fox_s = document.getElementsByTagName('script')[0];-->
     <!--fox_s.parentNode.insertBefore(foxscript, fox_s);})();-->
 <!--</script>-->

<!--<script charset="UTF-8" src="//cdn.sendpulse.com/js/push/d3b4c897641725e186c9c6fa05324529_1.js" async></script>-->

</body>

</html>